<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=1080, initial-scale=1.0"> -->
    <title>Ping Check</title>
</head>
<style>
    #pingNumber {
        font-size: 20px;
        margin: 0px;
    }
</style>
<body onload="initializePingCheck()">
    <p id="pingNumber">###ms</p>
    <img id="hiddenImage" src="" alt="hidden" style="display: none;">
</body>
    <script>
        var start = new Date().getTime();
        function initializePingCheck() {
            var hiddenImage = document.getElementById('hiddenImage');
            var pingNumber = document.getElementById('pingNumber');
            hiddenImage.onerror = imageFailedToLoad;
            function changeImageURL() {
                start = new Date().getTime();
                hiddenImage.src = 'https://s3.bhs.io.cloud.ovh.net/' + start;
                // hiddenImage.src = "https://s3.us-west-or.io.cloud.ovh.us/" + start;
            }
            function imageFailedToLoad() {
                var end = new Date().getTime();
                var time = end - start;
                if (time < 100) {
                    time = ' ' + time;
                }
                pingNumber.innerHTML = time + 'ms';
                
            }
            function setPingNumberFontsize() {
                if (window.innerHeight < 100) {
                    document.getElementById('pingNumber').style.fontSize = '128px';
                } else {
                    document.getElementById('pingNumber').style.fontSize = '160px';
                }
            }
            changeImageURL();
            setPingNumberFontsize();
            setInterval(function () {
                changeImageURL();
                setPingNumberFontsize();
            }, 1000);
        }
    </script>
</body>
</html>